---
import type { Character } from "../data/characters";

interface Props {
    character: Character;
}

const { character } = Astro.props;

// Map elements to colors (simplified)
const elementColors: Record<string, string> = {
    Pyro: "text-red-500 bg-red-100/10 border-red-500/20",
    Hydro: "text-blue-500 bg-blue-100/10 border-blue-500/20",
    Anemo: "text-teal-400 bg-teal-100/10 border-teal-500/20",
    Electro: "text-purple-500 bg-purple-100/10 border-purple-500/20",
    Dendro: "text-green-500 bg-green-100/10 border-green-500/20",
    Cryo: "text-cyan-400 bg-cyan-100/10 border-cyan-500/20",
    Geo: "text-yellow-500 bg-yellow-100/10 border-yellow-500/20",
};

const getRarityStars = (rarity: number) => {
    return "★".repeat(rarity);
};

const elementClass = elementColors[character.element] || "text-gray-400";
---

<div
    class="group relative bg-slate-800 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-1 border border-slate-700 hover:border-slate-600 block cursor-pointer"
>
    <div class="aspect-square w-full overflow-hidden bg-slate-900">
        <img
            src={character.imageUrl}
            alt={character.name}
            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
            loading="lazy"
        />
        <!-- Rarity Badge overlay -->
        <div
            class={`absolute top-2 right-2 px-2 py-0.5 rounded text-xs font-bold backdrop-blur-md ${character.rarity === 5 ? "bg-yellow-500/20 text-yellow-200 border border-yellow-500/50" : "bg-purple-500/20 text-purple-200 border border-purple-500/50"}`}
        >
            {character.rarity}★
        </div>
    </div>

    <div class="p-4">
        <h3
            class="text-lg font-bold text-white mb-1 group-hover:text-yellow-400 transition-colors"
        >
            {character.name}
        </h3>
        <div class="flex items-center justify-between">
            <span
                class={`text-sm font-medium px-2 py-0.5 rounded border ${elementClass}`}
            >
                {character.element}
            </span>
            <span class="text-xs text-slate-400 uppercase tracking-wide"
                >{character.weapon}</span
            >
        </div>
    </div>
</div>
